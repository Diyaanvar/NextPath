<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Institutes List</title>

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

    <style>
        body {
            background: #eef7f5;
            font-family: "Poppins", sans-serif;
        }

        .container-box {
            background: white;
            padding: 30px;
            border-radius: 20px;
            box-shadow: 0 4px 18px rgba(0,0,0,0.1);
            margin-top: 50px;
        }

        h2 {
            color: #2a9d8f;
            font-weight: 600;
        }

        table thead {
            background: #2a9d8f;
            color: white;
        }

        .approved-row {
            background: #d4edda !important; /* Light green */
        }

        .rejected-row {
            background: #f8d7da !important; /* Light red */
        }

        .pending-row {
            background: #fff3cd !important; /* Light yellow */
        }

        .btn-back {
            background: #2a9d8f;
            color: white;
        }
        .btn-back:hover {
            background: #1f7f75;
        }

        .btn-delete {
            background: #e63946;
            color: white;
            padding: 5px 12px;
            border-radius: 8px;
        }
        .btn-delete:hover {
            background: #c62832;
        }
    </style>
</head>
<body>

<div class="container container-box">
    <div class="d-flex justify-content-between align-items-center mb-3">
        <h2>Institutes List</h2>
        <a href="{% url 'adminhome' %}" class="btn btn-back">Back to Dashboard</a>
    </div>

    <div class="table-responsive mt-4">
        <table class="table table-bordered table-hover text-center align-middle">
            <thead>
                <tr>
                    <th>SR.No</th>
                    <th>Name</th>
                    <th>Institute Type</th>
                    <th>Email</th>
                    <th>Phone</th>
                    <th>Certificate</th>
                    <th>Actions</th>
                    <th>Status</th>
                </tr>
            </thead>
            <tbody>

                {% if institutes %}
                    {% for inst in institutes %}
                    <tr class="
                        {% if inst.status == 'approved' %}
                            approved-row
                        {% elif inst.status == 'rejected' %}
                            rejected-row
                        {% else %}
                            pending-row
                        {% endif %}
                    ">
                        <td>{{ forloop.counter }}</td>
                        <td>{{ inst.name }}</td>
                        <td>{{ inst.institute_type|title }}</td>
                        <td>{{ inst.email }}</td>
                        <td>{{ inst.phone }}</td>

                        <td>
                            {% if inst.registration_certificate %}
                                <a href="{{ inst.registration_certificate.url }}" target="_blank">View</a>
                            {% else %}
                                Not Uploaded
                            {% endif %}
                        </td>

                        <td>
                            {% if inst.status != 'approved' %}
                                <a href="{% url 'approve_institute' inst.id %}" class="btn btn-success btn-sm mb-1">Approve</a>
                            {% endif %}
                            {% if inst.status != 'rejected' %}
                                <a href="{% url 'reject_institute' inst.id %}" class="btn btn-warning btn-sm text-white mb-1">Reject</a>
                            {% endif %}
                            <a href="{% url 'delete_institute' inst.id %}" class="btn-delete mb-1"
                               onclick="return confirm('Are you sure you want to delete this institute?');">Delete</a>
                        </td>

                        <td>
                            {% if inst.status == 'approved' %}
                                <span class="badge bg-success">Approved</span>
                            {% elif inst.status == 'rejected' %}
                                <span class="badge bg-danger">Rejected</span>
                            {% else %}
                                <span class="badge bg-warning text-dark">Pending</span>
                            {% endif %}
                        </td>
                    </tr>
                    {% endfor %}
                {% else %}
                <tr>
                    <td colspan="8">No Institutes Found</td>
                </tr>
                {% endif %}

            </tbody>
        </table>
    </div>
</div>

</body>
</html>
